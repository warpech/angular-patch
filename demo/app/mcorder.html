<!doctype html>
<html lang="en" ng-app="McOrderApp">
  <head>
    <?php if($injectEliminateRequest == true) { ?>
    <script>
      var __elim_rq = <?php echo json_encode($_SESSION['data']) ?>;
    </script>
    <?php } ?>
    <meta charset="utf-8">
    <title>Angular Patch McOrder demo</title>
    <script src="../demo/js/jquery.min.js"></script>
    <script src="../demo/js/angular.min.js"></script>
    <script src="../demo/js/angular-ui-handsontable.full.js"></script>
    <link rel="stylesheet" media="screen" href="../demo/js/angular-ui-handsontable.full.css">

    <script src="../src/lib/jsonpatch.js"></script>
    <script src="../src/lib/jsondiffpatch.js"></script>
    <script src="../src/lib/appContext.js"></script>
    <script src="../src/serverScope.js"></script>
    <script src="../demo/app/mcorder.js"></script>
    <?php if($injectEliminateRequest == false) { ?>
    <meta name="View-Model" content="<?php echo $_SESSION['data']['__vm']?>">
    <?php } ?>
  </head>
  <body ng-controller="MyCtrl" server-scope>

    <h1>Angular Patch McOrder demo</h1>

    <p>The session is restarted when you refresh the window. Random name is generated on session start</p>

    <button ng-click="dumpItems()">Dump object to console</button>

    <h2>Order no {{OrderNo}}</h2>
    <h3>{{Items.length}} items &ndash; total quantity: {{TotalQuantity}}</h3>

    <div ui-handsontable datarows="item in Items">
      <datacolumn value="item.Product._Search$" title="'Favorite food'" type="'autocomplete'" live strict>
        <optionlist datarows="option in item.Product._Options" clickrow="item.Product._Search$ = option.Description">
          <img src="{{option.Image}}" style="width: 16px; height: 16px;"> {{option.Description}}
        </optionlist>
      </datacolumn>
      <datacolumn value="item.Quantity$" title="'Quantity'"/>
    </div>

    <button ng-click="AddRow$ = '$$null'">Add row</button>

  </body>
</html>