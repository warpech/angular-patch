<!doctype html>
<html lang="en" ng-app="TestApp">
  <head>
    <?php if($injectEliminateRequest == true) { ?>
    <script>
      var __elim_rq = <?php echo json_encode($_SESSION['data']) ?>;
    </script>
    <?php } ?>
    <meta charset="utf-8">
    <title>Angular Patch demo</title>
    <script src="../examples/js/angular.min.js"></script>
    
    <script src="../dist/angular-patch.js"></script>
    
    <script src="../examples/app/test.js"></script>
    <?php if($injectEliminateRequest == false) { ?>
    <meta name="View-Model" content="<?php echo $_SESSION['data']['__vm']?>">
    <?php } ?>
  </head>
  <body ng-controller="MyCtrl">

    <h1>Angular Patch demo</h1>

    <p>The session is restarted when you refresh the window. Random name is generated on session start</p>

    <p><button ng-click="clientChange()">Put controller's name</button></p>

    <table>
      <tr>
        <td>First name</td>
        <td><input ng-model="$root.FirstName"></td><!-- $root. is needed because Angular cannot propagate changes in primitive values -->
      </tr>
      <tr>
        <td>Last name</td>
        <td><input ng-model="$root.LastName"></td>
      </tr>
      <tr>
        <td>Full name (generated on server)</td>
        <td><input ng-model="FullName" ng-readonly="true" style="opacity: 0.7; width: 400px"></td>
      </tr>
      <tr>
        <td>Address</td>
        <td>Street: <input ng-model="Address.Street"> City: <input ng-model="Address.City"></td>
      </tr>
    </table>

    <hr>

    <input ng-model="$root.MyTextBox">
    <div>{{MyMessage}}</div>

    <hr>

    <h1>Lamps</h1>

    <button ng-click="addLamp()">Add new lamp</button>

    <ol>
      <li ng-repeat="Lamp in Lamps">
        is
        <label>
          <input type="checkbox" ng-model="Lamp.State">
          <span ng-show="Lamp.State" style="background: yellow;">ON</span>
          <span ng-show="!Lamp.State" style="background: black; color: white;">OFF</span>
        </label>
      </li>
    </ol>

    <p>{{LampSummary}}</p>

  </body>
</html>